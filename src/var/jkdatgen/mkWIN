AR=xilib.exe
ARFLAGS=-qnoipo -lib /NOLOGO

RM=del /F

HDF5=C:\HDF5
HDF5INC=/I$(HDF5)\include
HDF5LIB=/LIBPATH:$(HDF5)\lib libhdf5_hl_fortran.lib libhdf5_hl_f90cstub.lib libhdf5_hl.lib libhdf5_fortran.lib libhdf5_f90cstub.lib libhdf5.lib

F90=ifort.exe
F90FLAGS=$(HDF5INC) /nologo /O3 /fpp /nofpscomp /standard-semantics /QxHost /fp:source /Qfma /Qcomplex-limited-range- /Qfast-transcendentals- /Qftz- /Qprec-div /Qprec-sqrt /Qvec-report /traceback /libs:dll /threads
LDFLAGS=/link /RELEASE $(HDF5LIB)

XDATAGEN_OBJ=gendat.obj genlam.obj ixamax.obj jpart.obj seedix.obj seedok.obj txtlam.obj xa2g.obj xaxpy.obj xcopy.obj xdot.obj xgemv.obj xger.obj xgjgt.obj xlacpy.obj xlaev2.obj xlagsy.obj xlaran.obj xlarnd.obj xlarnv.obj xlaruv.obj xlaset.obj xnrm2.obj xrot.obj xscal.obj xswap.obj xsybpc.obj xsyjf2.obj xsymv.obj xsyr.obj xsyr2.obj
SUPPORT_OBJ=lsame.obj xerbla.obj
DDATAGEN_OBJ=dlaran.obj dlarnd.obj

all: jkdatgen.exe xdatagen.lib support.lib ddatagen.lib

jkdatgen.exe: jkdatgen.f90 xdatagen.lib support.lib ddatagen.lib mkWIN
	$(F90) $(F90FLAGS) jkdatgen.f90 /Fe$@ $(LDFLAGS) xdatagen.lib support.lib ddatagen.lib

xdatagen.lib: $(XDATAGEN_OBJ) mkWIN
	$(AR) $(ARFLAGS) /OUT:$@ $(XDATAGEN_OBJ)

support.lib: $(SUPPORT_OBJ) mkWIN
	$(AR) $(ARFLAGS) /OUT:$@ $(SUPPORT_OBJ)

ddatagen.lib: $(DDATAGEN_OBJ) mkWIN
	$(AR) $(ARFLAGS) /OUT:$@ $(DDATAGEN_OBJ)

dlaran.obj: dlaran.f90 mkWIN
	$(F90) $(F90FLAGS) /c dlaran.f90

dlarnd.obj: dlarnd.f90 mkWIN
	$(F90) $(F90FLAGS) /c dlarnd.f90

gendat.obj: gendat.f90 mkWIN
	$(F90) $(F90FLAGS) /c gendat.f90

genlam.obj: genlam.f90 mkWIN
	$(F90) $(F90FLAGS) /c genlam.f90

ixamax.obj: ixamax.f90 mkWIN
	$(F90) $(F90FLAGS) /c ixamax.f90

jpart.obj: jpart.f90 mkWIN
	$(F90) $(F90FLAGS) /c jpart.f90

lsame.obj: lsame.f90 mkWIN
	$(F90) $(F90FLAGS) /c lsame.f90

seedix.obj: seedix.f90 mkWIN
	$(F90) $(F90FLAGS) /c seedix.f90

seedok.obj: seedok.f90 mkWIN
	$(F90) $(F90FLAGS) /c seedok.f90

txtlam.obj: txtlam.f90 mkWIN
	$(F90) $(F90FLAGS) /c txtlam.f90

xa2g.obj: xa2g.f90 mkWIN
	$(F90) $(F90FLAGS) /c xa2g.f90

xaxpy.obj: xaxpy.f90 mkWIN
	$(F90) $(F90FLAGS) /c xaxpy.f90

xcopy.obj: xcopy.f90 mkWIN
	$(F90) $(F90FLAGS) /c xcopy.f90

xdot.obj: xdot.f90 mkWIN
	$(F90) $(F90FLAGS) /c xdot.f90

xerbla.obj: xerbla.f90 mkWIN
	$(F90) $(F90FLAGS) /c xerbla.f90

xgemv.obj: xgemv.f90 mkWIN
	$(F90) $(F90FLAGS) /c xgemv.f90

xger.obj: xger.f90 mkWIN
	$(F90) $(F90FLAGS) /c xger.f90

xgjgt.obj: xgjgt.f90 mkWIN
	$(F90) $(F90FLAGS) /c xgjgt.f90

xlacpy.obj: xlacpy.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlacpy.f90

xlaev2.obj: xlaev2.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlaev2.f90

xlagsy.obj: xlagsy.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlagsy.f90

xlaran.obj: xlaran.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlaran.f90

xlarnd.obj: xlarnd.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlarnd.f90

xlarnv.obj: xlarnv.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlarnv.f90

xlaruv.obj: xlaruv.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlaruv.f90

xlaset.obj: xlaset.f90 mkWIN
	$(F90) $(F90FLAGS) /c xlaset.f90

xnrm2.obj: xnrm2.f90 mkWIN
	$(F90) $(F90FLAGS) /c xnrm2.f90

xrot.obj: xrot.f90 mkWIN
	$(F90) $(F90FLAGS) /c xrot.f90

xscal.obj: xscal.f90 mkWIN
	$(F90) $(F90FLAGS) /c xscal.f90

xswap.obj: xswap.f90 mkWIN
	$(F90) $(F90FLAGS) /c xswap.f90

xsybpc.obj: xsybpc.f90 mkWIN
	$(F90) $(F90FLAGS) /c xsybpc.f90

xsyjf2.obj: xsyjf2.f90 mkWIN
	$(F90) $(F90FLAGS) /c xsyjf2.f90

xsymv.obj: xsymv.f90 mkWIN
	$(F90) $(F90FLAGS) /c xsymv.f90

xsyr.obj: xsyr.f90 mkWIN
	$(F90) $(F90FLAGS) /c xsyr.f90

xsyr2.obj: xsyr2.f90 mkWIN
	$(F90) $(F90FLAGS) /c xsyr2.f90

clean:
	-$(RM) $(DDATAGEN_OBJ)
	-$(RM) ddatagen.lib
	-$(RM) $(SUPPORT_OBJ)
	-$(RM) support.lib
	-$(RM) $(XDATAGEN_OBJ)
	-$(RM) xdatagen.lib
	-$(RM) jkdatgen.exe
